top_builddir = ..

LIBS = @LIBS@

LDFLAGS = @LDFLAGS@

CC = @CC@

SHELL=/bin/sh

INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

INCLUDEDIR = @includedir@

prefix = @prefix@
exec_prefix = @exec_prefix@
srcdir = @srcdir@
bindir = @bindir@
libdir = @libdir@
mandir = @mandir@

CFLAGS = @CPPFLAGS@ @CFLAGS@ @DEFS@ -I.

MKINSTALLDIRS = $(srcdir)/mkinstalldirs

SHELL = /bin/sh

.SUFFIXES:
.SUFFIXES: .c .o .lo

MYOBJECTS = \
    ../bytelevel.lo \
    bintree.lo \
    dibtoxpm.lo

all: libdib.la test_dibtoxpm

libdib.la:  $(MYOBJECTS)
	../libtool $(CC) -o libdib.la $(MYOBJECTS) \
		-rpath $(libdir) -version-info 0:0:0

test_dibtoxpm:  libdib.la test_dibtoxpm.o
	../libtool $(CC) $(LDFLAGS) -o test_dibtoxpm test_dibtoxpm.o libdib.la

.c.o:
	$(CC) $(CFLAGS) -c $<

.c.lo:
	../libtool $(CC) $(CFLAGS) -c $<

clean:
	rm -rf *.o *.lo *.a *.la .libs test_dibtoxpm core

realclean: 
	rm -rf *.o *.lo *.a *.la .libs test_dibtoxpm core Makefile

installdirs:
	$(MKINSTALLDIRS) $(libdir) \
	$(INCLUDEDIR)

install: all installdirs
	$(INSTALL_DATA) dibtoxpm.h $(INCLUDEDIR)/dibtoxpm.h
	../libtool $(INSTALL) libdib.la $(libdir)/libdib.la
	../libtool --finish $(libdir)


#  DO  NOT  DELETE THIS LINE -- make depend depends on it.
